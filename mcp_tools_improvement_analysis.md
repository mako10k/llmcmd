# MCPãƒ„ãƒ¼ãƒ«ç¾¤ã®æ”¹å–„ææ¡ˆãƒ»ãƒã‚°å ±å‘Šãƒªã‚¹ãƒˆ

## ğŸ§  ãƒ¡ãƒ¢ãƒªæ¤œç´¢ã‹ã‚‰ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œç‚¹

### 1. **mcp-assoc-memory** - æ—¢ã«å ±å‘Šæ¸ˆã¿ Issue #12
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®ä¿¡é ¼æ€§å•é¡Œ**
- memory_sync exportæ™‚ã®å‹•ä½œä¸å®‰å®šæ€§
- å†…å®¹æ¤œè¨¼æ©Ÿèƒ½ã®ä¸è¶³

## ğŸ” ç¾åœ¨ã®MCPãƒ„ãƒ¼ãƒ«ä¸€è¦§åˆ†æ

æ¤œå‡ºã•ã‚ŒãŸMCPãƒ„ãƒ¼ãƒ«:
- mcp-assoc-memory (è¨˜æ†¶ç³»)
- mcp-shell-server (ã‚·ã‚§ãƒ«å®Ÿè¡Œ)
- mcp-redis (ã‚­ãƒ£ãƒƒã‚·ãƒ¥)
- mcp-search (æ¤œç´¢)
- mcp-sampler (ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°)
- mcp-bridge (ãƒ–ãƒªãƒƒã‚¸)
- mcp-bridge-server (ãƒ–ãƒªãƒƒã‚¸ã‚µãƒ¼ãƒãƒ¼)
- mcp-cozodb (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)
- mcp-confirm (ç¢ºèªç³»)
- mcp-assoc-memory-clean (è¨˜æ†¶ã‚¯ãƒªãƒ¼ãƒ³ç‰ˆ)

## ğŸš¨ ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œç‚¹ã¨æ”¹å–„ææ¡ˆ

### 2. **mcp-confirm** - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†ã®æ½œåœ¨çš„å•é¡Œ

#### å•é¡Œåˆ†æ
```typescript
interface ElicitationParams {
  timeoutMs?: number; // Custom timeout in milliseconds
}
```

**æ½œåœ¨çš„å•é¡Œ**:
1. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã®å¿œç­”å‡¦ç†ãŒä¸æ˜ç¢º**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã«å¿œç­”ã—ãŸå ´åˆã®æŒ™å‹•
   - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã®ä¸€è²«æ€§
   
2. **é©å¿œçš„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã®ä¸è¶³**
   - å±é™ºåº¦ã«å¿œã˜ãŸã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“èª¿æ•´
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ãŸå‹•çš„èª¿æ•´æ©Ÿèƒ½

3. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ãŒãªã„**
   - é‡è¦ãªç¢ºèªã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã®å†è©¦è¡Œ
   - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®ä¸è¶³

#### æ”¹å–„ææ¡ˆ
```typescript
interface EnhancedElicitationParams {
  timeoutMs?: number;
  timeoutBehavior?: 'default_deny' | 'default_allow' | 'retry' | 'escalate';
  retryAttempts?: number;
  escalationTarget?: string; // ç®¡ç†è€…é€šçŸ¥ãªã©
  adaptiveTimeout?: {
    riskLevel: 'low' | 'medium' | 'high' | 'critical';
    baseTimeout: number;
    multiplier: number;
  };
}
```

### 3. **mcp-shell-server** - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–ãŒå¿…è¦

#### ç¾åœ¨ã®å•é¡Œ
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã®ä¾‹å¤–å‡¦ç†
- é•·æ™‚é–“å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã®é©åˆ‡ãªç›£è¦–
- ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

#### æ”¹å–„ææ¡ˆ
1. **ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–å¼·åŒ–**
   - ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡º
   - ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ç›£è¦–
   - ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™å¼·åˆ¶

2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°**
   - å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã®å±é™ºåº¦è©•ä¾¡
   - ç•°å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º
   - å®Ÿè¡Œå±¥æ­´ã®åˆ†ææ©Ÿèƒ½

### 4. **mcp-bridge/mcp-bridge-server** - é‡è¤‡ãƒ»çµ±åˆèª²é¡Œ

#### å•é¡Œåˆ†æ
- åŒæ§˜ã®æ©Ÿèƒ½ã‚’æŒã¤2ã¤ã®ãƒ„ãƒ¼ãƒ«ãŒå­˜åœ¨
- æ©Ÿèƒ½ã®é‡è¤‡ã«ã‚ˆã‚‹æ··ä¹±ã®å¯èƒ½æ€§
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è² è·ã®å¢—å¤§

#### æ”¹å–„ææ¡ˆ
1. **æ©Ÿèƒ½çµ±åˆã®æ¤œè¨**
   - å…±é€šæ©Ÿèƒ½ã®æŠ½å‡º
   - æ˜ç¢ºãªå½¹å‰²åˆ†æ‹…ã®å®šç¾©
   - çµ±ä¸€APIã®è¨­è¨ˆ

### 5. **mcp-search** - æ¤œç´¢ç²¾åº¦ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

#### æƒ³å®šã•ã‚Œã‚‹å•é¡Œ
1. **æ¤œç´¢çµæœã®é–¢é€£æ€§è©•ä¾¡**
   - æ¤œç´¢ç²¾åº¦ã®å®šé‡è©•ä¾¡æ©Ÿèƒ½ãŒãªã„
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã®ä¸è¶³

2. **å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æ”¹å–„

#### æ”¹å–„ææ¡ˆ
```python
# æ¤œç´¢çµæœè©•ä¾¡æ©Ÿèƒ½
def evaluate_search_results(query: str, results: List[SearchResult]) -> SearchMetrics:
    return SearchMetrics(
        relevance_scores=[...],
        diversity_score=...,
        coverage_score=...,
        user_satisfaction=...
    )
```

### 6. **å…¨MCPãƒ„ãƒ¼ãƒ«å…±é€š** - æ¨ªæ–­çš„æ”¹å–„

#### 1. **çµ±ä¸€ãƒ­ã‚°åŸºç›¤**
```python
# å…±é€šãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
{
  "timestamp": "2025-08-06T13:25:00Z",
  "tool": "mcp-shell-server",
  "operation": "shell_execute",
  "user_id": "mako10k",
  "risk_level": "high",
  "details": {...},
  "audit_trail": [...]
}
```

#### 2. **çµ±ä¸€ã‚¨ãƒ©ãƒ¼åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ **
```python
class MCPError(Exception):
    ERROR_CATEGORIES = {
        'SECURITY_VIOLATION': 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é•å',
        'TIMEOUT_EXCEEDED': 'ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¶…é', 
        'RESOURCE_EXHAUSTED': 'ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³',
        'VALIDATION_FAILED': 'æ¤œè¨¼å¤±æ•—',
        'NETWORK_ERROR': 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼'
    }
```

#### 3. **çµ±ä¸€è¨­å®šç®¡ç†**
```json
{
  "mcp_tools_config": {
    "global": {
      "timeout_default_ms": 30000,
      "log_level": "info",
      "security_mode": "strict"
    },
    "tool_specific": {
      "mcp-shell-server": {
        "max_execution_time": 300000,
        "dangerous_patterns": [...]
      },
      "mcp-confirm": {
        "adaptive_timeout": true,
        "escalation_enabled": true
      }
    }
  }
}
```

#### 4. **å…±é€šãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½**
```python
def health_check_all_mcp_tools():
    return {
        "mcp-shell-server": check_shell_server_health(),
        "mcp-confirm": check_confirm_health(),
        "mcp-assoc-memory": check_memory_health(),
        # ...
        "overall_status": "healthy" | "degraded" | "critical"
    }
```

## ğŸ“Š å„ªå…ˆåº¦ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| ãƒ„ãƒ¼ãƒ« | å•é¡Œ | å„ªå…ˆåº¦ | å½±éŸ¿åº¦ | å®Ÿè£…å®¹æ˜“æ€§ |
|--------|------|--------|--------|------------|
| mcp-assoc-memory | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | HIGH | HIGH | MEDIUM |
| mcp-confirm | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç† | HIGH | MEDIUM | HIGH |
| mcp-shell-server | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ» | CRITICAL | HIGH | LOW |
| mcp-bridge* | é‡è¤‡å•é¡Œ | MEDIUM | LOW | HIGH |
| å…¨ä½“ | çµ±ä¸€ãƒ­ã‚°åŸºç›¤ | MEDIUM | HIGH | MEDIUM |

## ğŸ¯ å®Ÿè£…æ¨å¥¨é †åº

1. **å³åº§å¯¾å¿œ** (ä»Šé€±): mcp-confirm ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¼·åŒ–
2. **çŸ­æœŸ** (2é€±é–“ä»¥å†…): mcp-shell-server ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
3. **ä¸­æœŸ** (1ãƒ¶æœˆä»¥å†…): çµ±ä¸€ãƒ­ã‚°åŸºç›¤æ§‹ç¯‰
4. **é•·æœŸ** (2-3ãƒ¶æœˆ): MCPãƒ„ãƒ¼ãƒ«ç¾¤ã®çµ±åˆãƒ»æœ€é©åŒ–

---

**æ³¨è¨˜**: ã™ã¹ã¦æ¨æ¸¬ãƒ™ãƒ¼ã‚¹ã®åˆ†æã§ã™ã€‚å„ãƒ„ãƒ¼ãƒ«ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è©³ç´°ç¢ºèªå¾Œã«å…·ä½“çš„ãªå•é¡Œã‚’ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
